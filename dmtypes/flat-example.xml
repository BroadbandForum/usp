<?xml version="1.0" encoding="UTF-8"?>
<dm:document xmlns:dm="urn:broadband-forum-org:cwmp:datamodel-1-4"
             xmlns:dmr="urn:broadband-forum-org:cwmp:datamodel-report-0-1"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="urn:broadband-forum-org:cwmp:datamodel-1-4
                                    http://www.broadband-forum.org/cwmp/cwmp-datamodel-1-4.xsd 
                                 urn:broadband-forum-org:cwmp:datamodel-report-0-1
                                    http://www.broadband-forum.org/cwmp/cwmp-datamodel-report.xsd"
             spec="urn:broadband-forum-org:tbd" file="flat-example.xml">

  <description>
    CSDA "Objects with sub-objects" example from USP ''Sandbox for Protocol Discussion''.
    * ''Flat'' version.
  </description>

  <!-- XXX shouldn't need to include "Device.Objects." in the profile definitions
           (report tool bug). -->

  <component name="bistate">
    <parameter name="bistateNumberOfEntries" access="readOnly">
      <description>
        {{numentries}}
      </description>
      <syntax>
        <unsignedInt/>
      </syntax>
    </parameter>
    <object name="bistate.{i}." access="readWrite" minEntries="0" maxEntries="unbounded"
      numEntriesParameter="bistateNumberOfEntries" dmr:noUniqueKeys="true">
      <!--
      <parameter name="on" access="readWrite">
        <syntax command="true">
          <boolean/>
        </syntax>
      </parameter>
      <parameter name="off" access="readWrite">
        <syntax command="true">
          <boolean/>
        </syntax>
      </parameter>
      <parameter name="toggle" access="readWrite">
        <syntax command="true">
          <boolean/>
        </syntax>
      </parameter>
      -->
      <parameter name="state" access="readWrite">
        <syntax>
          <boolean/>
        </syntax>
      </parameter>
    </object>
    <profile name="bistate:1">
      <object ref="Device.Objects." requirement="present">
        <parameter ref="bistateNumberOfEntries" requirement="readOnly"/>        
      </object>
      <object ref="Device.Objects.bistate.{i}." requirement="present">
        <parameter ref="state" requirement="readWrite"/>        
      </object>
    </profile>
  </component>
  
  <component name="intensity">
    <parameter name="intensityNumberOfEntries" access="readOnly">
      <description>
        {{numentries}}
      </description>
      <syntax>
        <unsignedInt/>
      </syntax>
    </parameter>
    <object name="intensity.{i}." access="readWrite" minEntries="0" maxEntries="unbounded"
      numEntriesParameter="intensityNumberOfEntries" dmr:noUniqueKeys="true">
      <!--
      <parameter name="step_up" access="readWrite">
        <syntax command="true">
          <boolean/>
        </syntax>
      </parameter>
      <parameter name="step_down" access="readWrite">
        <syntax command="true">
          <boolean/>
        </syntax>
      </parameter>
      <parameter name="fade_auto" access="readWrite">
        <syntax command="true">
          <boolean/>
        </syntax>
      </parameter>
      <parameter name="fade_up" access="readWrite">
        <syntax command="true">
          <boolean/>
        </syntax>
      </parameter>
      <parameter name="fade_down" access="readWrite">
        <syntax command="true">
          <boolean/>
        </syntax>
      </parameter>
      <parameter name="fade_stop" access="readWrite">
        <syntax command="true">
          <boolean/>
        </syntax>
      </parameter>
      <parameter name="max" access="readWrite">
        <syntax command="true">
          <boolean/>
        </syntax>
      </parameter>
      <parameter name="min" access="readWrite">
        <syntax command="true">
          <boolean/>
        </syntax>
      </parameter>
      -->
      <parameter name="level" access="readWrite">
        <syntax>
          <int/>
        </syntax>
      </parameter>
      <parameter name="ratio" access="readWrite">
        <syntax>
          <int/>
        </syntax>
      </parameter>
      <parameter name="fading" access="readOnly">
        <syntax>
          <int/>
        </syntax>
      </parameter>
    </object>
    <profile name="intensity:1">
      <object ref="Device.Objects." requirement="present">
        <parameter ref="intensityNumberOfEntries" requirement="readOnly"/>        
      </object>
      <object ref="Device.Objects.intensity.{i}." requirement="present">
        <parameter ref="level" requirement="readWrite"/>        
        <parameter ref="ratio" requirement="readWrite"/>        
        <parameter ref="fading" requirement="readOnly"/>        
      </object>
    </profile>
  </component>
  
  <component name="energy">
    <parameter name="energyNumberOfEntries" access="readOnly">
      <description>
        {{numentries}}
      </description>
      <syntax>
        <unsignedInt/>
      </syntax>
    </parameter>
    <object name="energy.{i}." access="readWrite" minEntries="0" maxEntries="unbounded"
      numEntriesParameter="energyNumberOfEntries" dmr:noUniqueKeys="true">
      <parameter name="consumption" access="readWrite">
        <description>
          {{issue|No DM ''decimal'' type; add based on YANG ''decimal64''?}}
        </description>
        <syntax>
          <int/>
        </syntax>
      </parameter>
      <parameter name="since" access="readOnly">
        <syntax>
          <int/>
        </syntax>
      </parameter>
      <parameter name="instantaneous" access="readOnly">
        <syntax>
          <int/>
        </syntax>
      </parameter>
    </object>
    <profile name="energy:1">
      <object ref="Device.Objects." requirement="present">
        <parameter ref="energyNumberOfEntries" requirement="readOnly"/>        
      </object>
      <object ref="Device.Objects.energy.{i}." requirement="present">
        <parameter ref="consumption" requirement="readWrite"/>        
        <parameter ref="since" requirement="readOnly"/>        
        <parameter ref="instantaneous" requirement="readOnly"/>        
      </object>
    </profile>
  </component>
  
  <component name="dimmer">
    <parameter name="dimmerNumberOfEntries" access="readOnly">
      <description>
        {{numentries}}
      </description>
      <syntax>
        <unsignedInt/>
      </syntax>
    </parameter>
    <object name="dimmer.{i}." access="readOnly" minEntries="0" maxEntries="unbounded"
        numEntriesParameter="dimmerNumberOfEntries" dmr:noUniqueKeys="true">
      <parameter name="bs" access="readOnly">
        <syntax>
          <string>
            <pathRef refType="strong" targetParent=".Objects.bistate." targetType="row"/>
          </string>
        </syntax>
      </parameter>
      <parameter name="int" access="readOnly">
        <syntax>
          <string>
            <pathRef refType="strong" targetParent=".Objects.intensity." targetType="row"/>
          </string>
        </syntax>
      </parameter>
      <parameter name="en" access="readOnly">
        <syntax>
          <string>
            <pathRef refType="strong" targetParent=".Objects.energy." targetType="row"/>
          </string>
        </syntax>
      </parameter>      
    </object>
    <profile name="dimmer-basic:1" extends="bistate:1 intensity:1">
      <object ref="Device.Objects." requirement="present">
        <parameter ref="dimmerNumberOfEntries" requirement="readOnly"/>        
      </object>
      <object ref="Device.Objects.dimmer.{i}." requirement="present">
        <parameter ref="bs" requirement="readOnly"/>        
        <parameter ref="int" requirement="readOnly"/>        
      </object>
    </profile>
    <profile name="dimmer:1" extends="dimmer-basic:1 energy:1">
      <object ref="Device.Objects.dimmer.{i}." requirement="present">
        <parameter ref="en" requirement="readOnly"/>        
      </object>
    </profile>
  </component>

  <component name="switch">
    <parameter name="switchNumberOfEntries" access="readOnly">
      <description>
        {{numentries}}
      </description>
      <syntax>
        <unsignedInt/>
      </syntax>
    </parameter>
    <object name="switch.{i}." access="readOnly" minEntries="0" maxEntries="unbounded"
        numEntriesParameter="switchNumberOfEntries" dmr:noUniqueKeys="true">
      <parameter name="bs" access="readOnly">
        <syntax>
          <string>
            <pathRef refType="strong" targetParent=".Objects.bistate." targetType="row"/>
          </string>
        </syntax>
      </parameter>
    </object>
    <profile name="switch:1" extends="bistate:1">
      <object ref="Device.Objects." requirement="present">
        <parameter ref="switchNumberOfEntries" requirement="readOnly"/>        
      </object>
      <object ref="Device.Objects.switch.{i}." requirement="present">
        <parameter ref="bs" requirement="readOnly"/>        
      </object>
    </profile>
  </component>
  
  <component name="ceiling-fan">
    <parameter name="ceiling-fanNumberOfEntries" access="readOnly">
      <description>
        {{numentries}}
      </description>
      <syntax>
        <unsignedInt/>
      </syntax>
    </parameter>
    <object name="ceiling-fan.{i}." access="readOnly" minEntries="0" maxEntries="unbounded"
      numEntriesParameter="ceiling-fanNumberOfEntries" dmr:noUniqueKeys="true">
      <parameter name="sw" access="readOnly">
        <syntax>
          <string>
            <pathRef refType="strong" targetParent=".Objects.switch." targetType="row"/>
          </string>
        </syntax>
      </parameter>
      <parameter name="dim" access="readOnly">
        <syntax>
          <string>
            <pathRef refType="strong" targetParent=".Objects.dimmer." targetType="row"/>
          </string>
        </syntax>
      </parameter>
    </object>
    <profile name="ceiling-fan:1" extends="switch:1 dimmer:1">
      <object ref="Device.Objects." requirement="present">
        <parameter ref="ceiling-fanNumberOfEntries" requirement="readOnly"/>        
      </object>
      <object ref="Device.Objects.ceiling-fan.{i}." requirement="present">
        <parameter ref="sw" requirement="readOnly"/>        
        <parameter ref="dim" requirement="readOnly"/>        
      </object>
    </profile>
  </component>

  <!-- these are additional examples -->
  <component name="my-switch">
    <parameter name="my-switchNumberOfEntries" access="readOnly">
      <description>
        {{numentries}}
      </description>
      <syntax>
        <unsignedInt/>
      </syntax>
    </parameter>
    <object name="my-switch.{i}." access="readOnly" minEntries="0" maxEntries="unbounded"
      numEntriesParameter="my-switchNumberOfEntries" dmr:noUniqueKeys="true">
      <parameter name="sw" access="readOnly">
        <syntax>
          <string>
            <pathRef refType="strong" targetParent=".Objects.switch." targetType="row"/>
          </string>
        </syntax>
      </parameter>
      <parameter name="my-swp" access="readWrite">
        <syntax>
          <boolean/>
        </syntax>
      </parameter>
    </object>
    <profile name="my-switch:1" extends="switch:1">
      <object ref="Device.Objects." requirement="present">
        <parameter ref="my-switchNumberOfEntries" requirement="readOnly"/>        
      </object>
      <object ref="Device.Objects.my-switch.{i}." requirement="present">
        <parameter ref="sw" requirement="readOnly"/>        
        <parameter ref="my-swp" requirement="readWrite"/>        
      </object>
    </profile>
  </component>
  
  <!-- model that illustrates usage -->
  <model name="flat-example:1.0">
    <object name="Device." access="readOnly" minEntries="1" maxEntries="1">
      <parameter name="sw1" access="readOnly">
        <syntax>
          <string>
            <pathRef refType="strong" targetParent=".Objects.switch." targetType="row"/>
          </string>
        </syntax>
      </parameter>
      
      <parameter name="sw2" access="readOnly">
        <syntax>
          <string>
            <pathRef refType="strong" targetParent=".Objects.switch." targetType="row"/>
          </string>
        </syntax>
      </parameter>
      
      <parameter name="dim" access="readOnly">
        <syntax>
          <string>
            <pathRef refType="strong" targetParent=".Objects.dimmer." targetType="row"/>
          </string>
        </syntax>
      </parameter>
      
      <parameter name="fan" access="readOnly">
        <syntax>
          <string>
            <pathRef refType="strong" targetParent=".Objects.ceiling-fan." targetType="row"/>
          </string>
        </syntax>
      </parameter>
      
      <parameter name="my-sw1" access="readOnly">
        <syntax>
          <string>
            <pathRef refType="strong" targetParent=".Objects.switch." targetType="row"/>
          </string>
        </syntax>
      </parameter>
      
      <parameter name="my-swaNumberOfEntries" access="readOnly">
        <description>
          {{numentries}}
        </description>
        <syntax>
          <unsignedInt/>
        </syntax>
      </parameter>
    </object>

    <object name="Device.my-swa.{i}." access="readOnly" minEntries="0" maxEntries="unbounded"
      numEntriesParameter="my-swaNumberOfEntries" dmr:noUniqueKeys="true">
      <parameter name="my-switch" access="readOnly">
        <syntax>
          <string>
            <pathRef refType="strong" targetParent=".Objects.my-switch." targetType="row"/>
          </string>
        </syntax>        
      </parameter>
    </object>
    
    <object name="Device.Objects." access="readOnly" minEntries="1" maxEntries="1">
      <component ref="bistate"/>
      <component ref="intensity"/>
      <component ref="energy"/>
      <component ref="dimmer"/>
      <component ref="switch"/>
      <component ref="ceiling-fan"/>
      <component ref="my-switch"/>      
    </object>    
  </model>

</dm:document>