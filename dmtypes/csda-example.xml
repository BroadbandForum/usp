<?xml version="1.0" encoding="UTF-8"?>
<dm:document xmlns:dm="urn:broadband-forum-org:cwmp:datamodel-1-4"
             xmlns:dmr="urn:broadband-forum-org:cwmp:datamodel-report-0-1"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="urn:broadband-forum-org:cwmp:datamodel-1-4
                                    http://www.broadband-forum.org/cwmp/cwmp-datamodel-1-4.xsd 
                                 urn:broadband-forum-org:cwmp:datamodel-report-0-1
                                    http://www.broadband-forum.org/cwmp/cwmp-datamodel-report.xsd"
             spec="urn:broadband-forum-org:tbd" file="csda-example.xml">

  <description>
    CSDA "Objects with sub-objects" example from USP ''Sandbox for Protocol Discussion''.
  </description>

  <component name="bistate">
    <parameter name="on" access="readWrite">
      <syntax command="true">
        <boolean/>
      </syntax>
    </parameter>
    <parameter name="off" access="readWrite">
      <syntax command="true">
        <boolean/>
      </syntax>
    </parameter>
    <parameter name="toggle" access="readWrite">
      <syntax command="true">
        <boolean/>
      </syntax>
    </parameter>
    <parameter name="state" access="readWrite">
      <syntax>
        <boolean/>
      </syntax>
    </parameter>
    <!-- XXX profiles don't work when components can be expanded anywhere :(
    <profile name="bistate:1">
      <parameter ref="state" requirement="readWrite"/>
    </profile>
    -->
  </component>
  
  <component name="intensity">
    <parameter name="step_up" access="readWrite">
      <syntax command="true">
        <boolean/>
      </syntax>
    </parameter>
    <parameter name="step_down" access="readWrite">
      <syntax command="true">
        <boolean/>
      </syntax>
    </parameter>
    <parameter name="fade_auto" access="readWrite">
      <syntax command="true">
        <boolean/>
      </syntax>
    </parameter>
    <parameter name="fade_up" access="readWrite">
      <syntax command="true">
        <boolean/>
      </syntax>
    </parameter>
    <parameter name="fade_down" access="readWrite">
      <syntax command="true">
        <boolean/>
      </syntax>
    </parameter>
    <parameter name="fade_stop" access="readWrite">
      <syntax command="true">
        <boolean/>
      </syntax>
    </parameter>
    <parameter name="max" access="readWrite">
      <syntax command="true">
        <boolean/>
      </syntax>
    </parameter>
    <parameter name="min" access="readWrite">
      <syntax command="true">
        <boolean/>
      </syntax>
    </parameter>
    <parameter name="level" access="readWrite">
      <syntax>
        <int/>
      </syntax>
    </parameter>
    <parameter name="ratio" access="readWrite">
      <syntax>
        <int/>
      </syntax>
    </parameter>
    <parameter name="fading" access="readOnly">
      <syntax>
        <int/>
      </syntax>
    </parameter>
  </component>
  
  <component name="energy">
    <parameter name="consumption" access="readWrite">
      <description>
        {{issue|No DM ''decimal'' type; add based on YANG ''decimal64''?}}
      </description>
      <syntax>
        <int/>
      </syntax>
    </parameter>
    <parameter name="since" access="readOnly">
      <syntax>
        <int/>
      </syntax>
    </parameter>
    <parameter name="instantaneous" access="readOnly">
      <syntax>
        <int/>
      </syntax>
    </parameter>
  </component>
  
  <component name="dimmer">
    <object name="bs." access="readOnly" minEntries="1" maxEntries="1">
      <component ref="bistate"/>
    </object>
    <object name="int." access="readOnly" minEntries="1" maxEntries="1">
      <component ref="intensity"/>
    </object>
    <object name="en." access="readOnly" minEntries="0" maxEntries="1">
      <component ref="energy"/>
    </object>
  </component>

  <component name="switch">
    <object name="bs." access="readOnly" minEntries="1" maxEntries="1">
      <component ref="bistate"/>
    </object>    
  </component>

  <component name="ceiling-fan">
    <object name="sw." access="readOnly" minEntries="1" maxEntries="1">
      <component ref="switch"/>
    </object>    
    <object name="dim." access="readOnly" minEntries="1" maxEntries="1">
      <component ref="dimmer"/>
    </object>    
  </component>

  <!-- these are additional examples -->
  <component name="my-switch">
    <component ref="switch"/>
    <parameter name="my-swp" access="readWrite">
      <syntax>
        <boolean/>
      </syntax>
    </parameter>
  </component>

  <!-- model that illustrates usage -->
  <model name="csda-example:1.0">
    <object name="Device." access="readOnly" minEntries="1" maxEntries="1">
      <parameter name="my-swaNumberOfEntries" access="readOnly">
        <description>
          {{numentries}}
        </description>
        <syntax>
          <unsignedInt/>
        </syntax>
      </parameter>
    </object>

    <object name="Device.sw1." access="readOnly" minEntries="1" maxEntries="1">
      <component ref="switch"/>
    </object>
    
    <object name="Device.sw2." access="readOnly" minEntries="1" maxEntries="1">
      <component ref="switch"/>
    </object>
    
    <object name="Device.dim." access="readOnly" minEntries="1" maxEntries="1">
      <component ref="dimmer"/>
    </object>
    
    <object name="Device.fan." access="readOnly" minEntries="1" maxEntries="1">
      <component ref="ceiling-fan"/>
    </object>

    <object name="Device.my-sw1." access="readOnly" minEntries="1" maxEntries="1">
      <component ref="my-switch"/>
    </object>
    
    <object name="Device.my-swa.{i}." access="readOnly" minEntries="0" maxEntries="unbounded"
      numEntriesParameter="my-swaNumberOfEntries" dmr:noUniqueKeys="true">
      <component ref="my-switch"/>
    </object>
    
  </model>

</dm:document>