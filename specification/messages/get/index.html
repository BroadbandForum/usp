<!-- Reference Links -->
<h1 id="the-get-message">The Get Message</h1>
<p>The basic Get message is used to retrieve the values of a set of Object’s parameters in order to learn an Agent’s current state. It takes a set of search paths as an input and returns the complete tree of parameters, plus the parameters of all sub-Objects, of any Object matched by the specified expressions. The search paths specified in a Get request can also target individual parameters within Objects to be returned.</p>
<p><em>Note: Those familiar with Broadband Forum <a href="https://www.broadband-forum.org/technical/download/TR-069.pdf" title="TR-069 Amendment 6 CPE WAN Management Protocol">TR-069</a> will recognize this behavior as the difference between “partial paths” and “complete paths”. This behavior is replicated in USP for the Get message for each path that is matched by the expression(s) supplied in the request.</em></p>
<p><em>Note: Each search path is intended to be evaluated separately, and the results from a given search path are returned in an element dedicated to that path. As such, it is possible that the same information may be returned from more than one search path. This is intended, and the Agent should treat each search path atomically.</em></p>
<p>The response returns an entry for each Path Name resolved by the path given in <code>requested_path</code>. If a path expression specified in the request does not match any valid parameters or Objects, the response will indicate that this expression was an “invalid path”, indicating that the Object or parameter does not currently exist in the Agent’s Instantiated Data Model.</p>
<p>For each resolved Path Name, a <code>ResolvedPathResult</code> message is given in the Response. This ResolvedPathResult contains the <code>resolved_path</code>, followed by a list of parameters of both the resolved_path Object and all of its sub-objects, plus their values. These Parameter Paths are Relative Paths to the <code>resolved_path</code>.</p>
<p>For example, a Controller wants to read the data model to learn the settings and stats of a single Wifi SSID, “HomeNetwork” with a BSSID of 00:11:22:33:44:55. It could use a Get request with the following elements:</p>
<pre><code>Get {
  param_path_list {
    Device.Wifi.SSID.[SSID=&quot;Homenetwork&quot;, BSSID=00:11:22:33:44:55].
  }
}</code></pre>
<p>In response to this request the Agent returns all parameters, plus sub-Objects and their parameters, of the addressed instance. The Agent returns this data in the Get response using an element for each of the requested paths. In this case:</p>
<pre><code>GetResp {
    req_path_result_list {
    requested_path: Device.Wifi.SSID.[SSID=&quot;Homenetwork&quot;,BSSID=00:11:22:33:44:55].
    err_code : 0
    err_msg :
    resolved_path_result_list {
      resolved_path : Device.Wifi.SSID.[SSID=&quot;Homenetwork&quot;,BSSID=00:11:22:33:44:55].
      result_parm_map {     
        key: 1.Enable
        value: True

        key: 1.Status
        value: Up

        key: 1.Name
        value: “Home Network”

        key: 1.LastChange
        value: 864000

        key: 1.BSSID
        value: 00:11:22:33:44:55

        key: 1.Stats.BytesSent
        value: 24901567

        key: 1.Stats.BytesReceived
        value: 892806908296

        etc.
      }
    }
  }</code></pre>
<p>In another example, the Controller only wants to read the current status of the Wifi network with the SSID “HomeNetwork” with the BSSID of 00:11:22:33:44:55. It could use a Get request with the following elements:</p>
<pre><code>Get {
  param_path_list {
    Device.Wifi.SSID.[SSID=”Homenetwork”,BSSID=00:11:22:33:44:55].Status
  }
}</code></pre>
<p>In response to this request the Agent returns only the Status parameter and its value.</p>
<pre><code>GetResp {
  req_path_result_list {
    requested_path: Device.Wifi.SSID.[SSID=”Homenetwork”,BSSID=00:11:22:33:44:55].Status
    err_code : 0
    err_msg :
    resolved_path_result_list {
      resolved_path : Device.Wifi.SSID.[SSID=&quot;Homenetwork&quot;,BSSID=00:11:22:33:44:55].
      result_parm_map {
        key: Status
        value: Up
      }
    }
  }
}</code></pre>
<p>Lastly, using wildcards or another Search Path, the requested path may resolve to more than one resolved path. For example for a Request sent to an Agent with two <code>Wifi.SSID</code> instances:</p>
<pre><code>    Get {
      param_path_list {
        Device.Wifi.SSID.*.Status
      }
    }</code></pre>
<p>The Agent's GetResponse would be:</p>
<pre><code>    GetResp {
      req_path_result_list {
        requested_path: Device.Wifi.SSID.*.
        err_code : 0
        err_msg :
        resolved_path_result_list {
          resolved_path : 1.
          result_parm_map {
            key: Status
            value: Up
          }

          resolved_path : 2.
          result_param_map {
              key: Status
              value: Up
          }
        }
      }
    }</code></pre>
<h2 id="get-request-elements">Get Request Elements</h2>
<p><code>repeated string param_path_list</code></p>
<p>This element is a set of Object Paths, Instance Paths, Parameter Paths, or Search Paths to Objects, Object Instances, and Parameters in an Agent’s Instantiated Data Model.</p>
<h2 id="get-response-elements">Get Response Elements</h2>
<p>repeated RequestedPathResult req_path_result</p>
<p>A repeated set of <code>RequestedPathResult</code> messages for each of the Path Names given in the associated Get request.</p>
<h3 id="requestedpathresult-element">RequestedPathResult Element</h3>
<p><code>string requested_path</code></p>
<p>This element contains one of the Path Names or Search Paths given in the <code>param_path</code> element of the associated Get Request.</p>
<p><code>fixed32 err_code</code></p>
<p>This element contains a <a href="/messages/error-codes/">numeric code</a> indicating the type of error that caused the Get to fail on this path. A value of 0 indicates the path could be read successfully.</p>
<p><strong>R-GET.0</strong> – If the Controller making the Request does not have Read permission on an Object or Parameter matched through the <code>requested_path</code> element, the Object or Parameter MUST be treated as if it is not present in the Agent’s instantiated data model.</p>
<p><code>string err_msg</code></p>
<p>This element contains additional information about the reason behind the error.</p>
<p><code>repeated ResolvedPathResult resolved_path_result_list</code></p>
<p>This element contains one message of type ResolvedPathResult for each path resolved by the Path Name or Search Path given by <code>requested_path</code>.</p>
<h4 id="resolvedpathresult-elements">ResolvedPathResult Elements</h4>
<p><code>string resolved_path</code></p>
<p>This element contains a Path Name to an Object or Object Instance that was resolved from the Path Name or Search Path given in <code>requested_path</code>.</p>
<p><strong>R-GET.1</strong> - If the <code>requested_path</code> included a Path Name to a Parameter, the <code>resolved_path</code> MUST contain only the Path Name to the parent Object or Object Instance of that parameter.</p>
<p><code>map&lt;string, string&gt; result_param_map</code></p>
<p>This element contains a set of mapped key/value pairs listing a Parameter Path (relative to the Path Name in <code>resolved_path</code>) to each of the parameters and their values, plus sub-objects and their values, of the Object given in <code>resolved_path</code>.</p>
<p><strong>R-GET.2</strong> - If the <code>requested_path</code> included a Path Name to a Parameter, <code>result_param_map</code> MUST contain only the Parameter included in that path.</p>
<p><strong>R-GET.3</strong> – If the Controller does not have Read permission on any of the parameters specified in <code>result_param_map</code>, these parameters MUST NOT be returned in this element.</p>
<p><strong>R-GET.4</strong> – Path Names containing Object Instance Paths in the keys of <code>result_param_map</code> MUST be addressed using Instance Number Addressing.</p>
<h4 id="get-message-supported-error-codes">Get Message Supported Error Codes</h4>
<p>Appropriate error codes for the Get message include <code>7000-7006</code>, <code>7008</code>, <code>7010</code>, and <code>7800-7999</code>.</p>
