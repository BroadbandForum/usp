<!-- Reference Links -->
<h1 id="the-getsupporteddm-message"><span class="header-section-number">1</span> The GetSupportedDM Message</h1>
<p>GetSupportedDM is used to retrieve the Objects, Parameters, Events, and Commands in the Agent's Supported Data Model. This allows a Controller to learn what an Agent understands, rather than its current state.</p>
<p>The GetSupportedDM is different from other USP messages in that it deals exclusively with the Agent's Supported Data Model. This means that Path Names to Multi-Instance Objects only address the Object itself, rather than Instances of the Object, and those Path Names that contain Multi-Instance objects in the Path use the <code>{i}</code> identifier to indicate their place in the Path Name.</p>
<p>For example, a Path Name to the <code>AssociatedDevice</code> Object (a child of the <code>.Wifi.AccessPoint</code> Object) would be addressed in the Supported Data Model as:</p>
<p><code>Device.Wifi.AccessPoint.{i}.AssociatedDevice.</code> or <code>Device.Wifi.AccessPoint.{i}.AssociatedDevice.{i}.</code></p>
<p>Both of these syntaxes are supported and equivalent. The Agent's Response returns the Path Name to the Object in the associated Device Type document as specified in <a href="https://www.broadband-forum.org/technical/download/TR-106_Amendment-8.pdf" title="TR-106 Amendment 8 Data Model Template for TR-069 Enabled Devices">TR-106</a>.</p>
<p>For example, the Controller wishes to learn the Wifi capabilities the Agent represents. It could issue a GetSupportedDM Request as:</p>
<pre><code>GetSupportedDM {
  discover_obj_list {
    obj_path : Device.Wifi.
    next_level : false
    return_commands : true
    return_events : true
    return_params : true
  }
}</code></pre>
<p>The Agent's Response would be:</p>
<pre><code>GetSupportedDMResp {
  req_obj_result_list {
    req_obj_path : Device.Wifi.
    err_code : 0
    err_msg :
    data_model_inst_uri : urn:broadband-forum-org:tr-181-2-12-0
    supported_obj_list {
      supported_obj_path : Device.Wifi.
      access : READ_ONLY (0)
      is_multi_instance : false
      supported_param_list {
        param_name : RadioNumberOfEntries
        access : READ_ONLY (0)

        param_name : SSIDNumberOfEntries
        access : READ_ONLY (0)

        param_name : AccessPointNumberOfEntries
        access : READ_ONLY (0)

        param_name : EndPointNumberOfEntries
        access : READ_ONLY (0)
      }
      supported_command_list {
        command_name : SomeCommand()
        input_arg_name_list {
          SomeArgument1
          SomeArgument2
        }
        output_arg_name_list {
          SomeArgument1
          SomeArgument2
        }
      }
      supported_event_list {
        event_name : SomeEvent!
        arg_name_list {
          SomeArgumentA
          SomeArgumentB
        }
      }
      supported_obj_path : Device.Wifi.SSID.{i}.
      access : ADD_DELETE (1)
      is_multi_instance : true
      supported_param_list {
        param_name : Enable
        access : READ_WRITE (1)

        param_name: Status
        access : READ_ONLY (0)

        param_name : Alias
        access : READ_WRITE (1)

        param_name : Name
        access : READ_ONLY (0)

        param_name: LastChange
        access : READ_ONLY (0)

        param_name : LowerLayers
        access : READ_WRITE (1)

        param_name : BSSID
        access : READ_ONLY (0)

        param_name : MACAddress                    
        access : READ_ONLY (0)

        param_name : SSID
        access : READ_WRITE (1)
      }
      supported_command_list {
        command_name : SomeCommand()
        input_arg_name_list {
          SomeArgument1
          SomeArgument2
        }
        output_arg_name_list {
          SomeArgument1
          SomeArgument2
        }
      }
      supported_event_list {
        event_name : SomeEvent!
        arg_name_list {
          SomeArgumentA
          SomeArgumentB
        }
      }                

// And continued, for Objects such as Device.Wifi.SSID.{i}.Stats., Device.Wifi.Radio.{i}, Device.Wifi.AccessPoint.{i}, Device.Wifi.AccessPoint.{i}.AssociatedDevice.{i}, etc.
  }
}</code></pre>
<h2 id="getsupporteddm-request-elements"><span class="header-section-number">1.1</span> GetSupportedDM Request Elements</h2>
<p><code>repeated DiscoverObject discover_obj_list</code></p>
<p>This element contains a repeated set of messages of type <code>DiscoverObject</code>.</p>
<h3 id="discoverobject-elements"><span class="header-section-number">1.1.1</span> DiscoverObject Elements</h3>
<p><code>string obj_path</code></p>
<p>This element contains a Path Name to an Object (not an Object Instance) in the Agent's Supported Data Model.</p>
<p><code>bool next_level</code></p>
<p>This element, if <code>true</code>, indicates that the Agent should return only those objects matched by the Path Name or Search Path in <code>obj_path</code> and its immediate (i.e., next level) child objects.</p>
<p><code>bool return_commands</code></p>
<p>This element, if <code>true</code>, indicates that the Agent should include a supported_command_list element containing Commands supported by the reported Object(s).</p>
<p><code>bool return_events</code></p>
<p>This element, if <code>true</code>, indicates that the Agent should include a supported_event_list element containing Events supported by the reported Object(s).</p>
<p><code>bool return_params</code></p>
<p>This element, if <code>true</code>, indicates that the Agent should include a supported_param_list element containing Parameters supported by the reported Object(s).</p>
<h2 id="getsupporteddmresp-elements"><span class="header-section-number">1.2</span> GetSupportedDMResp Elements</h2>
<p><code>repeated RequestedObjectResult req_obj_result_list</code></p>
<p>This element contains a repeated set of messages of type <code>RequestedObjectResult</code>.</p>
<h3 id="requestedobjectresult-elements"><span class="header-section-number">1.2.1</span> RequestedObjectResult Elements</h3>
<p><code>string req_obj_path</code></p>
<p>This element contains one of the Path Names given in <code>obj_path</code> of the associated GetSupportedDM Request.</p>
<p><code>fixed32 err_code</code></p>
<p>This element contains a <a href="/messages/error-codes/">numeric code</a> indicating the type of error that caused the Get to fail on this path. A value of 0 indicates the path could be read successfully.</p>
<p><strong>R-GSP.0</strong> - If the Controller making the Request does not have Read permission on an Object or Parameter matched through the <code>requested_path</code> element, the Object or Parameter MUST be treated as if it is not present in the Agentâ€™s instantiated data model.</p>
<p><code>string err_msg</code></p>
<p>This element contains additional information about the reason behind the error.</p>
<p><code>string data_model_inst_uri</code></p>
<p>This element contains a Uniform Resource Identifier (URI) to the Data Model associated with the Object specified in <code>obj_path</code>.</p>
<p><code>repeated SupportedObjectResult supported_obj_list</code></p>
<p>The element contains a message of type <code>SupportedObjectResult</code> for each reported Object.</p>
<h4 id="supportedobjectresult-elements"><span class="header-section-number">1.2.1.1</span> SupportedObjectResult Elements</h4>
<p><code>string supported_obj_path</code></p>
<p>This element contains the Path Name of the reported Object.</p>
<p><code>ObjAccessType access</code></p>
<p>The element contains an enumeration of type ObjAccessType specifying the access permissions that are specified for this Object in the Agent's Supported Data Model. This usually only applies to Multi-Instance Objects. This may be further restricted to the Controller based on rules defined in the Agent's <a href="addref">Access Control List</a>. It is an enumeration of:</p>
<pre><code>OBJ_READ_ONLY (0)
OBJ_ADD_DELETE (1)
OBJ_ADD_ONLY (2)
OBJ_DELETE_ONLY (3)</code></pre>
<p><code>bool is_multi_instance</code></p>
<p>This element, if <code>true</code>, indicates that the reported Object is a Multi-Instance Object.</p>
<p><code>repeated SupportedParamResult supported_param_list</code></p>
<p>The element contains a message of type <code>SupportedParamResult</code> for each Parameter supported by the reported Object.</p>
<p><code>repeated SupportedCommandResult supported_command_list</code></p>
<p>The element contains a message of type <code>SupportedCommandResult</code> for each Command supported by the reported Object.</p>
<p><code>repeated SupportedEventResult supported_event_list</code></p>
<p>The element contains a message of type <code>SupportedEventResult</code> for each Event supported by the reported Object.</p>
<h5 id="supportedparamresult-elements"><span class="header-section-number">1.2.1.1.1</span> SupportedParamResult Elements</h5>
<p><code>string param_name</code></p>
<p>This element contains the local name of the Parameter.</p>
<p><code>ParamAccessType access</code></p>
<p>The element contains an enumeration of type ParamAccessType specifying the access permissions that are specified for this Parameter in the Agent's Supported Data Model. This may be further restricted to the Controller based on rules defined in the Agent's <a href="addref">Access Control List</a>. It is an enumeration of:</p>
<pre><code>PARAM_READ_ONLY (0)
PARAM_READ_WRITE (1)
PARAM_WRITE_ONLY (2)</code></pre>
<h5 id="supportedcommandresult-elements"><span class="header-section-number">1.2.1.1.2</span> SupportedCommandResult Elements</h5>
<p><code>string command_name</code></p>
<p>This element contains the local name of the Command.</p>
<p><code>repeated string input_arg_name_list</code></p>
<p>This element contains a repeated set of local names for the input arguments of the Command.</p>
<p><strong>R-GSP.1</strong> - If any input arguments are multi-instance, the Agent MUST report them using Instance Number Addressing.</p>
<p><code>repeated string output_arg_name_list</code></p>
<p>This element contains a repeated set of local names for the output arguments of the Command.</p>
<p><strong>R-GSP.2</strong> - If any output arguments are multi-instance, the Agent MUST report them using Instance Number Addressing.</p>
<h5 id="supportedeventresult"><span class="header-section-number">1.2.1.1.3</span> SupportedEventResult</h5>
<p><code>string event_name</code></p>
<p>This element contains the local name of the Event.</p>
<p><code>repeated string arg_name_list</code></p>
<p>This element contains a repeated set of local names for the arguments of the Event.</p>
<p><strong>R-GPS.3</strong> - If any arguments are multi-instance, the Agent MUST report them using Instance Number Addressing.</p>
<h2 id="getsupporteddm-error-codes"><span class="header-section-number">1.3</span> GetSupportedDM Error Codes</h2>
<p>Appropriate error codes for the GetSupportedDM message include <code>7000-7006</code>, <code>7008</code>, <code>7016</code>, and <code>7800-7999</code>.</p>
<p><em>Note - when using error <code>7016</code> (Object Does Not Exist), it is important to note that in the context of GetSupportedDM this applies to the Agent's Supported Data Model.</em></p>
