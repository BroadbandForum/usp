<h1 id="the-getinstances-message"><span class="header-section-number">1</span> The GetInstances Message</h1>
<p>The GetInstances message takes a Path Name to an Object and requests that the Agent return the Instances of that Object that exist and <em>possibly</em> any Multi-Instance sub-Objects that exist as well as their Instances. This is used for getting a quick map of the Mutli-Instance Objects (i.e., tables) the Agent currently represents, and their unique keys, so that they can be addressed and manipulated later.</p>
<p>GetInstances takes one or more Path Names to Multi-Instance Objects in a Request to an Agent. In addition, both GetInstances and GetSupportedDM (below) make use of a flag called <code>next_level</code>, which determines whether or not the Response should include all of the sub-Objects that are children of the Object specified in <code>obj_path</code>. A value of <code>true</code> means that the Response should return data <em>only</em> for the Object specified. A value of false means that all sub-Objects should be resolved and returned.</p>
<p>For example, if a Controller wanted to know <em>only</em> the current instances of Wifi SSID Objects that exist on an Agent (that has 3 SSIDs), it would send a GetInstances Request as:</p>
<pre><code>GetInstances {
  obj_path_list : Device.Wifi.SSID.
  bool next_level : true
}</code></pre>
<p>The Agent's Response would contain:</p>
<pre><code>GetInstancesResp {
  req_path_result_list {
    requested_path : Device.Wifi.SSID.
    err_code : 0
    err_msg :
    curr_inst_list {
      instantiated_obj_path : Device.Wifi.SSID.1.
      unique_key_map :

        key : Alias
        value : UserWifi1

        key : Name
        value : UserWifi1

        key : SSID
        value : SecureProviderWifi

        key : BSSID
        value : 00:11:22:33:44:55

      instantiated_obj_path : Device.Wifi.SSID.2.
      unique_key_map :

        key : Alias
        value : UserWifi2

        key : Name
        value : UserWifi2

        key : SSID
        value : GuestProviderWifi

        key : BSSID
        value : 00:11:22:33:44:55

    }
  }
}</code></pre>
<p>In another example, the Controller wants to get all of the Instances of the <code>Device.Wifi.AccessPoint</code> table, plus all of the instances of the AssociatedDevice Object and AC Object (sub-Objects of AccessPoint). It would issue a GetInstances Request with the following:</p>
<pre><code>GetInstances {
  obj_path_list : Device.Wifi.AccessPoint.
  bool next_level : false
}</code></pre>
<p>The Agent's Response will contain an entry in curr_inst_list for all of the Instances of the <code>Device.Wifi.AccessPoint</code> table, plus the Instances of the Multi-Instance sub-Objects <code>.AssociatedDevice.</code> and <code>.AC.</code>:</p>
<pre><code>GetInstancesResp {
  req_path_result_list {
    requested_path : Device.Wifi.AccessPoint.
    err_code : 0
    err_msg :
    curr_inst_list {
      instantiated_obj_path : Device.Wifi.AccessPoint.1.
      unique_key_map :

        key : Alias
        value : SomeAlias

        key : SSIDReference
        value : Device.Wifi.SSID.1

      instantiated_obj_path : Device.Wifi.AccessPoint.2.
      unique_key_map :

        key : Alias
        value : SomeAlias

        key : SSIDReference
        value : Device.Wifi.SSID.2

      instantiated_obj_path : Device.Wifi.AccessPoint.1.AssociatedDevice.1.
      unique_key_map :

        key : MACAddress
        value : 11:22:33:44:55:66

      instantiated_obj_path : Device.Wifi.AccessPoint.1.AC.1.
      unique_key_map :

        key : AccessCategory
        value : BE

      instantiated_obj_path : Device.Wifi.AccessPoint.2.AssociatedDevice.1.
      unique_key_map :

        key : MACAddress
        value : 11:22:33:44:55:66

      instantiated_obj_path : Device.Wifi.AccessPoint.2.AC.1.
      unique_key_map :

        key : AccessCategory
        value : BE
      }
    }
  }</code></pre>
<p>Or more, if more Object Instances exist.</p>
<h2 id="getinstances-request-elements"><span class="header-section-number">1.1</span> GetInstances Request Elements</h2>
<p><code>repeated string obj_path_list</code></p>
<p>This element contains a repeated set of Path Names or Search Paths to Multi-Instance Objects in the Agent's Instantiated Data Model.</p>
<p><code>bool next_level</code></p>
<p>This element, if <code>true</code>, indicates that the Agent should return only those instances in the Object(s) matched by the Path Name or Search Path in <code>obj_path</code>, and not return any child objects.</p>
<h2 id="getinstances-response-elements"><span class="header-section-number">1.2</span> GetInstances Response Elements</h2>
<p><code>repeated RequestedPathResult req_path_result_list</code></p>
<p>This element contains a RequestedPathResult message for each Path Name or Search</p>
<p><code>string requested_path</code></p>
<p>This element contains one of the Path Names or Search Paths given in <code>obj_path</code> of the associated GetInstances Request.</p>
<p><code>fixed32 err_code</code></p>
<p>This element contains a <a href="/message/error-codes/index.html">numeric code</a> indicating the type of error that caused the Get to fail on this path. A value of 0 indicates the path could be read successfully.</p>
<p><strong>R-GIN.0</strong> - If the Controller making the Request does not have Read permission on an Object or Parameter matched through the <code>requested_path</code> element, the Object or Parameter MUST be treated as if it is not present in the Agentâ€™s instantiated data model.</p>
<p><code>string err_msg</code></p>
<p>This element contains additional information about the reason behind the error.</p>
<p><code>repeated CurrInstance curr_inst_list</code></p>
<p>This element contains a message of type <code>CurrInstance</code> for each Instance of <em>all</em> of the Objects matched by <code>requested_path</code> that exists in the Agent's Instantiated Data Model.</p>
<h4 id="currinstance-elements"><span class="header-section-number">1.2.0.1</span> CurrInstance Elements</h4>
<p><code>string instantiated_obj_path</code></p>
<p>This element contains the Instance Number of the Object Instance.</p>
<p><code>map&lt;string, string&gt; unique_key_map</code></p>
<p>This element contains a map of key/value pairs for all supported parameters that are part of any of this Object's unique keys.</p>
<p><strong>R-GIN.1</strong> - If the Controller does not have Read permission on any of the parameters specified in <code>unique_key_map</code>, these parameters MUST NOT be returned in this element.</p>
<h2 id="getinstances-error-codes"><span class="header-section-number">1.3</span> GetInstances Error Codes</h2>
<p>Appropriate error codes for the GetInstances message include <code>7000-7006</code>, <code>7008</code>, <code>7016</code>, <code>7018</code> and <code>7800-7999</code>.</p>
